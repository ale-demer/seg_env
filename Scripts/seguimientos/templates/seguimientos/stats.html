{% extends "seguimientos/base.html" %}
{% load bootstrap3 %}
{% load new_filters %}

{% block header %}
	<h2>Estadísticas:</h2>
{% endblock header %}

{% block content %}
	<h3>Mensual:</h3>
	<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
	  <script type="text/javascript">
	    google.charts.load('current', {packages:['corechart']});
	    google.charts.setOnLoadCallback(drawChart);
	  function drawChart() {
	    var oldData = google.visualization.arrayToDataTable([
	      ['Name', 'Cantidad'],
	      ['Ventas mes pasado', {{ request.user|last_month_sales }}]
	    ]);

	    var newData = google.visualization.arrayToDataTable([
	      ['Name', 'Cantidad'],
	      ['Ventas del mes', {{ request.user|monthly_sales }}]
	    ]);

	    var colChartDiff = new google.visualization.ColumnChart(document.getElementById('colchart_diff'));

	    var options = { legend: { position: 'top' } };

	    var diffData = colChartDiff.computeDiff(oldData, newData);
	    colChartDiff.draw(diffData, options);
	  }
	</script>

	<center><div id='colchart_diff' style='width: 675px; height: 375px;'></div></center>


	<h3>Diario:</h3>

	<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
        	   <script type="text/javascript">
        	     google.charts.load("current", {packages:["corechart"]});
        	 	    google.charts.setOnLoadCallback(drawChart);
        	     function drawChart() {
        	       var data = google.visualization.arrayToDataTable(
        	       {% autoescape off %}
                       {{ request.user|total_daily_sales }}
	                {% endautoescape %}
        	       );
        	       var options = {
        	         title: 'Ventas del día',
        	         is3D: true,
        	       };

        	       var chart = new google.visualization.PieChart(document.getElementById('donutchart'));
        	       chart.draw(data, options);
        	     }
     </script>
	<center><div id="donutchart" style="width: 675px; height: 375px; "></div></center>


{% endblock content %}